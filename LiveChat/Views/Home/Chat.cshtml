@using Microsoft.AspNet.Identity
@{
    ViewBag.Title = "Chat";
    ViewBag.CentralChatHub = MvcApplication.GetCentralChatHub();
    // Enables popover
    //http:// jsfiddle.net/qy9Az/4731/
}


@section scripts {
        <!--Script references. -->
        <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
        <!--Reference the SignalR library. -->
        <script src="~/Scripts/jquery.signalR-2.2.3.min.js"></script>
        <script src="@ViewBag.CentralChatHub/signalr/hubs"></script>
        <!--Reference the autogenerated SignalR hub script. -->
        <script src="~/signalr/hubs"></script>
        <!--SignalR script to update the chat page and send messages.-->
        <script>
        $(function () {
            $($.parseHTML(
    "<div id='LiveChatWrapper' class='card text-white bg-dark'>" +
        "<button class='btn btn-lg btn-dark'" +
        "        style='position:absolute; bottom:15px;'"+
        "        data-placement='top'"+
        "        id='StartChat'"+
        "        data-toggle=popover"+
        "        title='Live chat'"+
        "        data-content= \"" +
        "            <input type='text' id='message' />"+
        "            <input type='button' id='sendmessage' value='Send' />"+
        "            <dl id='discussion' style='height:200px; overflow-y: scroll'></dl>"+
        "        \">Chat!"+
"    </button>"+
"    </div>"
            )).appendTo(".ChatContainer");
            EmbedChat("@ViewBag.CentralChatHub");
        });

    </script>
    <script src="~/Scripts/LiveChat.js"></script>
}
